---
title: My Debian Stretch setup
author: [kevin]
date: 2017-11-27
tags: [Linux, Debian, setup]
draft: true
tweet: My Debian Stretch setup
output:
  rmarkdown::html_page:
    toc: true
    fig_width: 3
    dev: svg
---



<p><img src="https://img.shields.io/badge/inSileco-InDevelopment-3fb3b2.svg" /></p>
<p>This post details my Debian Stretch setup on my Lenovo Think Pad T470p. I got this new machine in August 2017 so I have a 5 months experience on Debian and thought it was a good timing to give the reasons why I moved from MacOS to Debian, how I set my computer up and what’s my feeling about working on Debian. Any comments/questions about what follows? Feel free to use the Disqus following the post.</p>
<section id="go-debian" class="level1">
<h1>Go Debian</h1>
<section id="from-macos-to-linux" class="level2">
<h2>From MacOS to Linux</h2>
<p>I have been a MacOS user for a long time mainly because my father was a MacOS user him-self. I remember back to 2005 how weird it sounded to be a Mac aficionado compare to how trendy it is nowadays. According to me, Apple still makes good computers and the money spend on them is worth the performance. However, given the trend of making computer as thin as possible, a Mac user has less and less <a href="https://www.theinquirer.net/inquirer/news/2404318/ifixit-apples-12in-macbook-is-near-impossible-to-repair">control over his hardware</a> and given the costs associated with having a Mac (adapters, repair costs, etc.) owning a Mac progressively became way less appealing to me. Moreover, since I started to do more and more coding I realized how rarely I used Apple’s softwares and use as many freeware as possible instead (the list of <a href="https://gist.github.com/KevCaz/e89f5584d4c5c9c92c4e">softwares</a> I used on my MacOS is actually very similar to the one I use on Debian and that I present below). It therefore occurs to me that I had no valid reason to keep using MacOS and I decided to go Linux. So far soooooo good :smile:.</p>
</section>
<section id="why-debian" class="level2">
<h2>Why Debian?</h2>
<p>The choice of Linux distribution is <strong>huge</strong> as you can see on the <a href="https://en.wikipedia.org/wiki/List_of_Linux_distributions">wikipedia page</a> . As I had only a little experience with Linux, mainly Ubuntu (on university’s computers) and Raspbian (on my <a href="https://www.raspberrypi.org/">Raspberry Pi</a>), I had no strong opinion. After a couple of readings comparing Linux distributions I concluded that what matters the most was my motivation to learn more and I decided to go Debian <em>the mother of many Linux distributions</em>.</p>
<p>I do not want to go into much details about Debian. First because I am no expert (and afraid I could be wrong) and second because you will learn way more by searching on the web by yourself especially on the <a href="https://www.debian.org/">official website</a>. I think it is nonetheless useful to have broad ideas about its development. Basically there are <a href="https://www.debian.org/releases/">four different kind of Debian releases</a> named after Toy Story’s characters:</p>
<ul>
<li><strong>unstable</strong>: always named <a href="http://pixar.wikia.com/wiki/Sid_Phillips">Sid</a>;</li>
<li><strong>testing</strong>: currently <a href="http://pixar.wikia.com/wiki/Buster">Buster</a>;<br />
</li>
<li><strong>stable</strong>: currently <a href="http://pixar.wikia.com/wiki/Buster">Stretch</a> (Debian 9);<br />
</li>
<li><strong>old stable</strong>: <a href="http://pixar.wikia.com/wiki/Jessie">Jessie</a>, <a href="http://pixar.wikia.com/wiki/Wheezy">Wheezy</a> (oldold stable) and previous.</li>
</ul>
<p>As explained in <a href="http://www.zdnet.com/article/debian-stable-or-debian-testing-which-linux-is-right-for-you/">this post by J.A. Watson</a> all new Debian packages (including new versions of existing packages) first entered the Debian testing process through the instable release. After a couple of tests it goes to the testing release where it stays longer. Depending on the kind of package it may or may not spread to stable and old stable relases (see <a href="https://wiki.debian.org/StableUpdates" class="uri">https://wiki.debian.org/StableUpdates</a>). Let say that the majority of new version of package do not spread and are accumulated in the testing. Actually soft freeze and full freeze to prepare the next stable release therefore during that time dedicate to solidify the nex release no update which explain that old version but using testing A new package or a new version first enter through the unstable release before testing, I was not aware and decided to install the stable released and released recently. Block not allowed does not mean people stop developping make not be included in the stable release so you will not be able to install using stabel release but you know thta extensively been tested it a choice.</p>
<p>Debian package I said? Where Debian dev occur? Let’s now consider the Debian packages found on the <a href="">Debian mirrors</a></p>
<p><a href="https://www.debian.org/doc/manuals/developers-reference/" class="uri">https://www.debian.org/doc/manuals/developers-reference/</a> <a href="https://www.debian.org/mirror/list" class="uri">https://www.debian.org/mirror/list</a> <a href="https://wiki.debian.org/StableUpdates" class="uri">https://wiki.debian.org/StableUpdates</a> <a href="https://packages.debian.org/sid/devel/lintian" class="uri">https://packages.debian.org/sid/devel/lintian</a></p>
<p>To illustrate In the video below I go to a mirror and show you were are store package I did for Pandoc</p>
<p>Want know more and even be involved… well just go on the website! <a href="https://www.debian.org/devel/" class="uri">https://www.debian.org/devel/</a></p>
<video width="100%" controls>
<source src="/assets/myDebianStretch/mirror.webm" type="video/webm">
<p>Your browser does not support the video tag. </video></p>
</section>
<section id="my-hardware" class="level2">
<h2>My hardware</h2>
<p>Unfortunately, I do not have strong knowledge about hardware and the choice that follows is basically the result of discussions with other non-expert people and a couple of searches on the web. Several brand of computer have high reputation and constantly make good computers. One of them is Lenovo and after looking a on the Internet claiming that Lenovo have a good Linux compatibility and decided to go for a Lenovo computer. Once I made my mind regarding the brand, I have spend some time to think about my general expectations: a laptop, medium-size screen (13“-15”), a good i7 processor, no less than 8Go of RAM, and at least 500Go SSD storage for less than 3000$CAN, warranty included. I finally made my mind and bought a customized <a href="https://www.notebookcheck.net/Lenovo-ThinkPad-T470p-Core-i7-GeForce-940MX-Laptop-Review.226802.0.html">Lenovo ThinkPad T470p</a> and below are a couple of details about this computer I gather using <code>inxi</code> (one of the freeware I have installed; if you are interested in free command line tools that returns information about your hardware I recommend <a href="http://www.binarytides.com/linux-commands-hardware-info/">this post on binarytides</a>)); the command <code>inxi -SMGCADP</code> entered in my terminal returns:</p>
<pre><code>System:    Host: debian Kernel: 4.9.0-4-amd64 x86_64 (64 bit) Desktop: Gnome 3.22.3
           Distro: Debian GNU/Linux 9 (stretch)
Machine:   Device: laptop System: LENOVO product: 20J7S0SU00 v: ThinkPad T470p
           Mobo: LENOVO model: 20J7S0SU00 v: SDK0J40709 WIN
           UEFI: LENOVO v: R0FET31W (1.11 ) date: 03/10/2017
Battery    BAT0: charge: 40.2 Wh 61.0% condition: 65.9/71.1 Wh (93%)
CPU:       Quad core Intel Core i7-7820HQ (-HT-MCP-) cache: 8192 KB
           clock speeds: max: 3900 MHz 1: 899 MHz 2: 899 MHz 3: 900 MHz 4: 900 MHz
           5: 899 MHz 6: 900 MHz 7: 899 MHz 8: 899 MHz
Graphics:  Card-1: Intel Device 591b
           Card-2: NVIDIA GM108M [GeForce 940MX]
           Display Server: X.Org 1.19.2 driver: N/A Resolution: 1920x1080@59.96hz
           GLX Renderer: Mesa DRI Intel Kabylake GT2 GLX Version: 3.0 Mesa 13.0.6
Audio:     Card Intel Device a171 driver: snd_hda_intel Sound: ALSA v: k4.9.0-4-amd64
Drives:    HDD Total Size: NA (-)
           ID-1: /dev/nvme0n1 model: N/A size: 1024.2GB
Partition: ID-1: / size: 922G used: 61G (7%) fs: ext4 dev: /dev/nvme0n1p2
           ID-2: swap-1 size: 17.03GB used: 0.00GB (0%) fs: swap dev: /dev/nvme0n1p3</code></pre>
</section>
<section id="hello-and-good-bye-windows-10" class="level2">
<h2>Hello and good bye Windows 10</h2>
<p>The Lenovo ThinkPad T470p was furnished with Windows 10 (note that was reelaes on June 2017) at model I did not have the choice of the OS, sadly :smile:). Well, I am no Windows user and do not intend to become one, so I got rid of Windows (I obviously took a selfie of me using windows first) and installed Debian Stretch, let me now explain how!</p>
<section id="get-a-bootable-usb-stick" class="level3">
<h3>Get a bootable USB stick</h3>
<p>I decided to go with the stable release of Debian so 2017 was Stretch ()on Debian version you need is doubtlessly available on the <a href="https://www.debian.org/releases/stretch/debian-installer/">official website</a>. I downloaded the the debian-installer for <strong>amd64</strong> architecture that can be used on bootable USB stick. I was quite familiar with installing Ubuntu or MacOS with USB stick but I was unable to remember the command lines required, so I googled something like “bootable USB stick Debian Stretch” and got an answer similar to <a href="https://unix.stackexchange.com/questions/293969/how-to-make-bootable-debian-usb-on-mac">this conversation on stackexchange</a> (remember that I was on MacOS before).</p>
</section>
<section id="a-small-modification-in-the-bios" class="level3">
<h3>A small modification in the BIOS</h3>
<blockquote>
<p>BIOS ([…] an acronym for Basic Input/Output System and also known as the System BIOS, ROM BIOS or PC BIOS) is non-volatile firmware used to perform hardware initialization during the booting process (power-on startup), and to provide runtime services for operating systems and programs. (<a href="https://en.wikipedia.org/wiki/BIOS" class="uri">https://en.wikipedia.org/wiki/BIOS</a>)</p>
</blockquote>
<p>Before you can go to your OS you have step and it cannot prevent you from installing a new OS by default. So I had to change this to be able to install Debian. On Lenovo ThinkPad when booting your computer the first image you get is the Lenovo logo and the following message:</p>
<blockquote>
<p>To interrupt normal startup press Enter</p>
</blockquote>
<p>I did so and then <code>F1</code> to access the BIOS. I opened the <em>Security</em> table and disable the <em>Secure Boot</em> option to be able to boot on the USB stick. As I needed a non-free firmware to use the Wi-Fi I plugged my device on an Ethernet Cable and seamlessly followed the different steps to successfully install Debian Stretch. Unfortunately, I did not record all I did but basically is is similar at what you can found on <a href="to%20be%20added">that post by …</a>. was installed with Gnome and a collection of useful software inluding <a href="">LibreOffice</a>, [Inkscape], Octave]() and a couple of funny old-school like games (<em>i.e.</em> Nibbles, Mines). Once Debian installed I completed my setup by installing my selection of softwares.</p>
</section>
</section>
</section>
<section id="setting-my-debian-stretch-up" class="level1">
<h1>Setting my Debian Stretch up</h1>
<!-- I use a fair number of software (note that some of them I seldom use). But
I know that using the package manager is useful and I only need to script them -->
<section id="gnome-gnome-tweak-tools-and-shortcuts" class="level2">
<h2>Gnome, gnome-tweak-tools and shortcuts</h2>
<p>I made three short videos to show you:</p>
<p>1- how to get the gnome version you are using with the GUI;<br />
2- how to tweak your gnome even more, as you will see I use the <a href="">papirus icons</a> and <a href="">Vimix dark them</a> you can find many good-looking them on <a href=""></a>; 3- where to find and add keyboard bindings (for instance to record the screencasts below <code>ctrl+alt+shift+R</code>).</p>
<section id="gnome-version" class="level3">
<h3>Gnome version</h3>
<video width="100%" controls>
<source src="/assets/myDebianStretch/gnomeVersion.webm" type="video/webm">
<p>Your browser does not support the video tag. </video></p>
<p><br></p>
</section>
<section id="gnome-tweak-tool" class="level3">
<h3>Gnome-Tweak-Tool</h3>
<video width="100%" controls>
<source src="/assets/myDebianStretch/gnomeTweak.webm" type="video/webm">
<p>Your browser does not support the video tag. </video></p>
<p><br></p>
</section>
<section id="keyboard-bindings" class="level3">
<h3>Keyboard bindings</h3>
<video width="100%" controls>
<source src="/assets/myDebianStretch/shortcuts.webm" type="video/webm">
<p>Your browser does not support the video tag. </video></p>
<p><br></p>
</section>
</section>
<section id="my-list-of-softwares" class="level2">
<h2>My list of softwares</h2>
<p>Below I provide the gist where I keep track of what I install on my computer (it is basically a bash script I can use to re-install my computer). To be able to fully reproduce this you need to change a few lines in the <a href="https://wiki.debian.org/SourcesList">sources list</a> as follows:</p>
<pre><code>deb http://debian.mirror.rafal.ca/debian/ stretch main contrib non-free
deb-src http://debian.mirror.rafal.ca/debian/ stretch main
deb http://security.debian.org/debian-security stretch/updates main
deb-src http://security.debian.org/debian-security stretch/updates main

# stretch-updates, previously known as &#39;volatile&#39; https://wiki.debian.org/StableUpdates
deb http://debian.mirror.rafal.ca/debian/ stretch-updates main
deb-src http://debian.mirror.rafal.ca/debian/ stretch-updates main

# R version 3.4.x repositories
deb http://cran.utstat.utoronto.ca/bin/linux/debian stretch-cran34/

# Qgis repositories
deb http://qgis.org/debian stretch main
deb-src http://qgis.org/debian stretch main

# Papirus icons repositories
deb http://ppa.launchpad.net/papirus/papirus/ubuntu xenial main
deb-src http://ppa.launchpad.net/papirus/papirus/ubuntu xenial main</code></pre>
<p>To get the wifi working, I needed non-free repo so I first edited the /etc/apt/sources.list as su: I add ‘contrib non-free’ after ‘main’ <a href="https://cran.r-project.org/bin/linux/debian/" class="uri">https://cran.r-project.org/bin/linux/debian/</a> To get 3.4.1, I follow the instruction here <a href="https://cloud.r-project.org/bin/linux/debian/#supported-branches" class="uri">https://cloud.r-project.org/bin/linux/debian/#supported-branches</a> and add: deb <a href="http://cran.utstat.utoronto.ca/bin/linux/debian" class="uri">http://cran.utstat.utoronto.ca/bin/linux/debian</a> stretch-cran34/ in /etc/apt/sources.list then I add the key using apt-key To get 3.4.1, I follow the instruction here <a href="https://cloud.r-project.org/bin/linux/debian/#supported-branches" class="uri">https://cloud.r-project.org/bin/linux/debian/#supported-branches</a> and add: deb <a href="http://cran.utstat.utoronto.ca/bin/linux/debian" class="uri">http://cran.utstat.utoronto.ca/bin/linux/debian</a> stretch-cran34/ in /etc/apt/sources.list then I add the key using apt-key —– Zotero config <a href="http://vk5tu.livejournal.com/54476.html" class="uri">http://vk5tu.livejournal.com/54476.html</a> and <a href="https://www.zotero.org/support/pdf_fulltext_indexing" class="uri">https://www.zotero.org/support/pdf_fulltext_indexing</a></p>
<p>If you are a <a href="https://brew.sh/">Homebrew</a> user, having different repositories in your source list is like using different taps. For further information about non-free software you should have a look at the official website about <a href="https://wiki.debian.org/fr/UnofficialRepositories">unofficial repositories</a>, <a href="https://wiki.debian.org/skype">Skype</a> and <a href="https://wiki.debian.org/dropbox">Dropbox</a>. Furthermore, if you wonder what is the difference between <code>deb</code> and <code>deb-src</code> go on <a href="https://unix.stackexchange.com/questions/20504/the-difference-between-deb-versus-deb-src-in-sources-list">stackexchange</a>. Once you are aware about this, have a look at my gist (version 125 when I first shared this post).</p>
<p><br></p>
<script src="https://gist.github.com/KevCaz/29536740b9150383a9d543ec1be96103.js"></script>
<p><br></p>
<p>Below is a table with link if you want know more about the software I use:</p>
<ul>
<li>Pandoc</li>
<li>Pandoc-citeproc</li>
<li>Pandoc-citeproc</li>
<li>R</li>
<li>Julia</li>
<li>Julia</li>
<li>Julia</li>
<li>Hugo</li>
<li>Hugo</li>
<li>Hugo</li>
<li>Hugo</li>
<li>Hugo</li>
<li>Hugo</li>
<li>inkScape</li>
<li>imagemagick</li>
</ul>
<p>As you can see for some of them I want a version newer than the one Debian stable. I use the same strategy:</p>
<ol type="1">
<li><code>wget</code> and save the <code>.deb</code> file in the temporary folder <code>/tmp/</code></li>
<li>install them with <code>dpkg</code> <code>sudo dpkg -i xxxx.deb</code></li>
</ol>
<p>Pandoc and hugo</p>
<!-- test whether the download work -->
</section>
</section>
<section id="issues" class="level1">
<h1>Issues</h1>
<p>Do I have any issue? Yes. I’ve still have (1) a couple of error messages on startup and (2) an issue with the back light of my screen! <strong>But</strong> regarding (1) everything works fine so I do not complain and for (2) I’ve found a work around :)</p>
<section id="various-messages-on-startup" class="level2">
<h2>Various messages on startup</h2>
<p>As you can see below I have a couple of error messages on log (command line is <code>sudo dmesg -l err</code>):</p>
<p><img src="/assets/myDebianStretch/errors.png" width="100%"></img></p>
<p>Well from what I understood nothing too bad. For instance <code>kvm: disabled by bios</code> is more a warning message than an error message. My wi-fiu works great despite the <code>firmware: failed to load iwlwifi-8265-26.ucode</code> message. The ACIP errors are <a href="https://unix.stackexchange.com/questions/92366/acpi-errors-exeptions-why-they-spam-how-to-know-and-fix-it">triggered because of firmware errors</a>. Well so far everything work well and fix such errors sounds far beyond my expertise :smile:.</p>
</section>
<section id="back-light" class="level2">
<h2>Back light</h2>
<p>After the fresh install, I was able to change the brightness of my screen using <code>F5</code> and <code>F6</code> but I am no longer able to do so. I guess at some point my computer hibernated and this cause the issue. Many posts on line addressing this issue and I have tried in vain to follow the procedures described to fix this (note that it is likely that I misinterpreted the procedure). However I have read very thorough <a href="https://techoverflow.net/2014/07/27/how-i-solved-my-toshiba-linux-backlight-issues/">post</a> and <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=651741">bug reports</a> reporting the same issue and I have learned a lot. That’s something I really enjoy with Debian: it forces me to understand how things works and even if my problem is not solved and I cannot yet use <code>F5</code> and <code>F6</code> I have found a workaround. I have appended a bash alias in my .zprofile:</p>
<p>alias mybl=‘sudo tee /sys/class/backlight/intel_backlight/brightness &lt;&lt;&lt;’</p>
<p>so now if <code>mybl 500</code> (mine is between 0 and 1060, that I’ve leant too :smile:) my backlight will ne chnaged accordingly!</p>
<p><br><br></p>
<p><strong>See you next post</strong></p>
<p><br></p>
</section>
</section>
