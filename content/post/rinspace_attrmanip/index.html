---
title: R in Space - Attribute manipulations
author: [david, marieh, nicolas, kevin, elliot, steve]
tags: [R in Space, R, Spatial]
date: 2018-04-07
draft: true
tweet: "R in Space - Attribute manipulations"
estime: 10
navposts:
  prev: rinspace_basicmapping
  home: rinspace_homepage
  next: rinspace_geomanip
output:
  rmarkdown::html_page:
    fig_width: 3
    dev: svg
---



<p><img src="https://img.shields.io/badge/inSileco-InDevelopment-3fb3b2.svg" /></p>
<div id="spatial-objects-attributes-manipulations" class="section level2">
<h2>Spatial objects attributes manipulations</h2>
<p>Now that we know how to import and transform different classes of spatial objects
in R, we can start manipulating their attributes. In this post, we will
make a brief overview of some useful basic manipulations that we can perform
on spatial object attributes. By no means are those examples exhaustive, but
they constitute common manipulations that are made with spatial objects.</p>
<p><br/></p>
<div id="vector-objects" class="section level3">
<h3>Vector objects</h3>
<p>For this part, we discuss how to manipulate attributes of objects from the <code>sf</code>
package. <code>sf</code> objects have the advantage of being structured like data frames,
making their manipulations more intuitive than for objects of class <code>sp</code>. However,
if the structure of <code>sp</code> objects is well understood, then the same principles
will mostly apply.</p>
<p>Let’s begin by creating an <code>sf</code> points object as seen in the post on
<a href="">Spatial objects in R</a> <!-- to add --></p>
<pre class="r"><code>mydata &lt;- data.frame(
  id = 1:20,
  long = -82+2*runif(20),
  lat = 42+2*runif(20),
  var1 = rnorm(20),
  var2 = 10*runif(20)
)

library(sf)</code></pre>
<pre><code>## Linking to GEOS 3.6.2, GDAL 2.2.4, proj.4 5.0.0</code></pre>
<pre class="r"><code>spatData &lt;- st_as_sf(mydata,
                     coords = c(&quot;long&quot;, &quot;lat&quot;),
                     crs = &quot;+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0&quot;)

knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<pre class="r"><code>plot(spatData)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/sim_points-1.png" width="672" /></p>
</div>
<div id="adding-and-removing-attributes" class="section level3">
<h3>Adding and removing attributes</h3>
<p>The object we currently have has to variables <code>var1</code> and <code>var2</code>. Additional
attributes can quickly be added to the attributes table of our objects.</p>
<pre class="r"><code>spatData$var3 &lt;- runif(20)
spatData$var4 &lt;- spatData$var1 * spatData$var2
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="right">var3</th>
<th align="right">var4</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="right">0.6544016</td>
<td align="right">0.5271691</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="right">0.3535367</td>
<td align="right">-1.5559970</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="right">0.4001560</td>
<td align="right">-1.4705877</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="right">0.9549762</td>
<td align="right">-6.9487451</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="right">0.2128042</td>
<td align="right">1.3793059</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="right">0.1118683</td>
<td align="right">1.7680750</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>Similarly, unwanted columns can be removed.</p>
<pre class="r"><code>spatData$var3 &lt;- spatData$var4 &lt;- NULL
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>However, if you have a very big dataset, you may want to remove columns without
having to write all column names manually! You could do this based on the names
of the columns you wish to remove or, alternatively, on the names of the
attributes you wish to keep.</p>
<pre class="r"><code># Remove last 20 attributes
for(i in 1:5) spatData &lt;- cbind(spatData, varSup = runif(20))
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="right">varSup</th>
<th align="right">varSup.1</th>
<th align="right">varSup.2</th>
<th align="right">varSup.3</th>
<th align="right">varSup.4</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="right">0.9964834</td>
<td align="right">0.3171747</td>
<td align="right">0.2741750</td>
<td align="right">0.3352666</td>
<td align="right">0.3900609</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="right">0.9364226</td>
<td align="right">0.2574092</td>
<td align="right">0.1191354</td>
<td align="right">0.2080349</td>
<td align="right">0.0779762</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="right">0.0948936</td>
<td align="right">0.4720889</td>
<td align="right">0.8215850</td>
<td align="right">0.3143642</td>
<td align="right">0.3717935</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="right">0.3681473</td>
<td align="right">0.5634641</td>
<td align="right">0.1270037</td>
<td align="right">0.0059372</td>
<td align="right">0.8967308</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="right">0.7008102</td>
<td align="right">0.4065090</td>
<td align="right">0.3715553</td>
<td align="right">0.5910249</td>
<td align="right">0.1187043</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="right">0.0983326</td>
<td align="right">0.9789418</td>
<td align="right">0.2837835</td>
<td align="right">0.3760595</td>
<td align="right">0.2045499</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<pre class="r"><code>rem &lt;- colnames(spatData)[4:8]
spatData &lt;- spatData[, !colnames(spatData) %in% rem]
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Keep id, var1 and var2
for(i in 1:5) spatData &lt;- cbind(spatData, varSup = runif(20))
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="right">varSup</th>
<th align="right">varSup.1</th>
<th align="right">varSup.2</th>
<th align="right">varSup.3</th>
<th align="right">varSup.4</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="right">0.4560753</td>
<td align="right">0.6404833</td>
<td align="right">0.8052572</td>
<td align="right">0.7481827</td>
<td align="right">0.4368254</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="right">0.1158872</td>
<td align="right">0.6519667</td>
<td align="right">0.0109709</td>
<td align="right">0.1044193</td>
<td align="right">0.2384444</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="right">0.9926997</td>
<td align="right">0.3212545</td>
<td align="right">0.5338655</td>
<td align="right">0.4143145</td>
<td align="right">0.9078791</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="right">0.0526423</td>
<td align="right">0.0960709</td>
<td align="right">0.1352359</td>
<td align="right">0.6456013</td>
<td align="right">0.5789344</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="right">0.3807540</td>
<td align="right">0.9165715</td>
<td align="right">0.6251482</td>
<td align="right">0.5747333</td>
<td align="right">0.5278241</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="right">0.8659517</td>
<td align="right">0.6332107</td>
<td align="right">0.4128490</td>
<td align="right">0.1878390</td>
<td align="right">0.8319548</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<pre class="r"><code>keep &lt;- c(&#39;id&#39;,&#39;var1&#39;,&#39;var2&#39;)
spatData &lt;- spatData[, keep]
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<p><br/></p>
</div>
<div id="subsets" class="section level3">
<h3>Subsets</h3>
<p>You may also wish to subset your object based on certain attribute values. We
will begin by adding some factorial attributes to our spatial object to discuss
this in more detail.</p>
<pre class="r"><code>spatData$fact1 &lt;- paste0(&#39;a&#39;, 1:2) # Create factor with 2 levels
spatData$fact2 &lt;- paste0(&#39;b&#39;, 1:5) # Create factor with 5 levels
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">fact1</th>
<th align="left">fact2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="left">a1</td>
<td align="left">b1</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="left">a2</td>
<td align="left">b2</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="left">a1</td>
<td align="left">b3</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="left">a2</td>
<td align="left">b4</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="left">a1</td>
<td align="left">b5</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="left">a2</td>
<td align="left">b1</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>The most simple way to subset an attributes table would be to manually select
the rows that we wish to view. In this instance, let’s say we only wish to
use the first 10 rows of our data.</p>
<pre class="r"><code>selectID &lt;- 1:10
plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/manualSub-1.png" width="672" /></p>
<p><br/></p>
<p>However, subsets based on certain criteria, <em>e.g.</em> all values greater to or
equal to 0, can be much more efficient to create subsets. These are conditional
statements and there is a vast body of material available discussing them, so
we will only present a few examples and invite you to consult other resources
like <a href="https://stackoverflow.com/">StackOverflow</a> for more specific questions.</p>
<pre class="r"><code># Select all values for var1 greater to or equal to 0
selectID &lt;- spatData$var1 &gt;= 0
plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/autoSub-1.png" width="672" /></p>
<pre class="r"><code># var1 smaller than 0 and var2 higher than 5
selectID &lt;- spatData$var1 &lt; 0 &amp; spatData$var2 &lt; 5
plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/autoSub-2.png" width="672" /></p>
<pre class="r"><code># fact1 equal to a1
selectID &lt;- spatData$fact1 == &#39;a1&#39;
plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/autoSub-3.png" width="672" /></p>
<pre class="r"><code># fact1 equal to a1 or var1 greater than 0
selectID &lt;- spatData$fact1 == &#39;a1&#39; | spatData$var1 &gt; 0
plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/autoSub-4.png" width="672" /></p>
<pre class="r"><code># fact2 equal to b3 or b4
selectID &lt;- spatData$fact2 %in% c(&#39;b3&#39;,&#39;b4&#39;)
plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/autoSub-5.png" width="672" /></p>
<p><br/></p>
</div>
<div id="join" class="section level3">
<h3>Join</h3>
<p>Joining tables based on their shared id is another common manipulation. This can
be quickly accomplished using the <code>left_join</code> function from the <code>dplyr</code> package.</p>
<pre class="r"><code># Create data.frame with id field similar to that in the spatial object
joinData &lt;- data.frame(id = seq(1, 20, by = 2),
                       var3 = rnorm(10))

# Join with attributes table of spatial object
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>spatData &lt;- left_join(spatData, joinData)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre class="r"><code>knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">fact1</th>
<th align="left">fact2</th>
<th align="right">var3</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.4903868</td>
<td align="right">1.075007</td>
<td align="left">a1</td>
<td align="left">b1</td>
<td align="right">0.0101959</td>
<td align="left">c(-81.8024716190994, 42.6100823129527)</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.3728839</td>
<td align="right">4.172873</td>
<td align="left">a2</td>
<td align="left">b2</td>
<td align="right">NA</td>
<td align="left">c(-80.3899031458423, 42.026078232564)</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">-0.2509555</td>
<td align="right">5.859953</td>
<td align="left">a1</td>
<td align="left">b3</td>
<td align="right">0.7583857</td>
<td align="left">c(-80.784852087032, 43.0842197341844)</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.7129443</td>
<td align="right">9.746547</td>
<td align="left">a2</td>
<td align="left">b4</td>
<td align="right">NA</td>
<td align="left">c(-81.2343355868943, 43.1030629281886)</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">1.0514086</td>
<td align="right">1.311865</td>
<td align="left">a1</td>
<td align="left">b5</td>
<td align="right">-2.5879322</td>
<td align="left">c(-80.0043925712816, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.2805270</td>
<td align="right">6.302691</td>
<td align="left">a2</td>
<td align="left">b1</td>
<td align="right">NA</td>
<td align="left">c(-80.0151476305909, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<p><br/></p>
</div>
<div id="aggregate" class="section level3">
<h3>Aggregate</h3>
<p>Information contained in a table can also be used to aggregate</p>
<pre class="r"><code>aggData &lt;- aggregate(spatData[&#39;var1&#39;], by = list(spatData$fact1), FUN = sum)
knitr::kable(head(aggData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Group.1</th>
<th align="right">var1</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">a1</td>
<td align="right">3.918016</td>
<td align="left">c(-81.8024716190994, -81.7245463533327, -81.4060410042293, -81.234184501227, -80.8069826518185, -80.7882361365482, -80.784852087032, -80.5632886835374, -80.3639615108259, -80.0043925712816, 42.6100823129527, 42.7181746605784, 42.8068605992012, 42.085868450813, 43.3459122339264, 43.4330802299082, 43.0842197341844, 42.8848000722937, 42.5641564098187, 42.9951165420935)</td>
</tr>
<tr class="even">
<td align="left">a2</td>
<td align="right">-9.347282</td>
<td align="left">c(-81.6437285747379, -81.5345378527418, -81.3086580913514, -81.2400546097197, -81.2343355868943, -81.0652374597266, -80.6873664255254, -80.5125646525994, -80.3899031458423, -80.0151476305909, 42.8721048687585, 42.4282727143727, 43.1997679164633, 43.8949478552677, 43.1030629281886, 42.6566422362812, 43.5736952363513, 42.3980092550628, 42.026078232564, 42.5848372559994)</td>
</tr>
</tbody>
</table>
<pre class="r"><code>plot(aggData, cex = abs(aggData$var1))</code></pre>
<pre><code>## Warning in classInt::classIntervals(na.omit(values), min(nbreaks, n.unq), :
## n same as number of different finite values\neach different finite value is
## a separate class</code></pre>
<p><img src="/rmarkdown-libs/figure-html4/unnamed-chunk-1-1.png" width="672" /></p>
</div>
</div>
<div id="raster-objects" class="section level2">
<h2>Raster objects</h2>
<p>Attributes tables associated with raster objects can also be manipulated, although
the data attached to a raster will typically be less amenable to changes and
multiple parameters.</p>
<div id="setting-values" class="section level3">
<h3>Setting values</h3>
</div>
<div id="subsets-1" class="section level3">
<h3>Subsets</h3>
</div>
<div id="section" class="section level3">
<h3></h3>
</div>
</div>
