---
title: R in Space - Attribute manipulations
author: [david, marieh, nicolas, kevin, elliot, steve]
tags: [R in Space, R, Spatial]
date: 2018-04-05
draft: false
tweet: "R in Space - Attribute manipulations"
estime: 10
output:
  rmarkdown::html_page:
    fig_width: 3
    dev: svg
---



<div class="figure">
<img src="https://img.shields.io/badge/inSileco-InDevelopment-3fb3b2.svg" />

</div>
<div id="spatial-objects-attributes-manipulations" class="section level2">
<h2>Spatial objects attributes manipulations</h2>
<p>Now that we know how to import and transform different classes of spatial objects in R, we can start manipulating their attributes. In this post, we will make a brief overview of some useful basic manipulations that we can perform on spatial object attributes. By no means are those examples exhaustive, but they constitute common manipulations that are made with spatial objects.</p>
<p><br/></p>
<div id="vector-objects" class="section level3">
<h3>Vector objects</h3>
<p>For this part, we discuss how to manipulate attributes of objects from the <code>sf</code> package. <code>sf</code> objects have the advantage of being structured like data frames, making their manipulations more intuitive than for objects of class <code>sp</code>. However, if the structure of <code>sp</code> objects is well understood, then the same principles will mostly apply.</p>
<p>Letâ€™s begin by creating an <code>sf</code> points object as seen in the post on <a href="">Spatial objects in R</a> <!-- to add --></p>
<pre class="r"><code>mydata &lt;- data.frame(
  id = 1:20,
  long = -82+2*runif(20),
  lat = 42+2*runif(20),
  var1 = rnorm(20),
  var2 = 10*runif(20)
)

library(sf)</code></pre>
<pre><code>## Linking to GEOS 3.4.2, GDAL 2.1.2, proj.4 4.9.1</code></pre>
<pre class="r"><code>spatData &lt;- st_as_sf(mydata,
                     coords = c(&quot;long&quot;, &quot;lat&quot;),
                     crs = &quot;+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0&quot;)

knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<pre class="r"><code>plot(spatData)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/sim_points-1.png" width="672" /></p>
</div>
<div id="adding-and-removing-attributes" class="section level3">
<h3>Adding and removing attributes</h3>
<p>The object we currently have has to variables <code>var1</code> and <code>var2</code>. Additional attributes can quickly be added to the attributes table of our objects.</p>
<pre class="r"><code>spatData$var3 &lt;- runif(20)
spatData$var4 &lt;- spatData$var1 * spatData$var2
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="right">var3</th>
<th align="right">var4</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="right">0.3039990</td>
<td align="right">3.4463583</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="right">0.1993685</td>
<td align="right">-3.7627301</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="right">0.5512916</td>
<td align="right">1.1824748</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="right">0.6754297</td>
<td align="right">-0.5939226</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="right">0.1468490</td>
<td align="right">1.5018548</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="right">0.4575942</td>
<td align="right">-11.2803147</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>Similarly, unwanted columns can be removed.</p>
<pre class="r"><code>spatData$var3 &lt;- spatData$var4 &lt;- NULL
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>However, if you have a very big dataset, you may want to remove columns without having to write all column names manually! You could do this based on the names of the columns you wish to remove or, alternatively, on the names of the attributes you wish to keep.</p>
<pre class="r"><code># Remove last 20 attributes
for(i in 1:5) spatData &lt;- cbind(spatData, varSup = runif(20))
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="right">varSup</th>
<th align="right">varSup.1</th>
<th align="right">varSup.2</th>
<th align="right">varSup.3</th>
<th align="right">varSup.4</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="right">0.1824141</td>
<td align="right">0.2141007</td>
<td align="right">0.1452400</td>
<td align="right">0.0901947</td>
<td align="right">0.3997859</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="right">0.3433435</td>
<td align="right">0.2696879</td>
<td align="right">0.3138313</td>
<td align="right">0.7849011</td>
<td align="right">0.3273998</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="right">0.2606751</td>
<td align="right">0.4560818</td>
<td align="right">0.0024703</td>
<td align="right">0.9371308</td>
<td align="right">0.6393730</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="right">0.8035273</td>
<td align="right">0.3982278</td>
<td align="right">0.6156779</td>
<td align="right">0.9756697</td>
<td align="right">0.8981297</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="right">0.5227899</td>
<td align="right">0.4771793</td>
<td align="right">0.8500819</td>
<td align="right">0.2263262</td>
<td align="right">0.6984368</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="right">0.8810976</td>
<td align="right">0.4647999</td>
<td align="right">0.4015342</td>
<td align="right">0.2921970</td>
<td align="right">0.8771954</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<pre class="r"><code>rem &lt;- colnames(spatData)[4:8]
spatData &lt;- spatData[, !colnames(spatData) %in% rem]
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Keep id, var1 and var2
for(i in 1:5) spatData &lt;- cbind(spatData, varSup = runif(20))
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="right">varSup</th>
<th align="right">varSup.1</th>
<th align="right">varSup.2</th>
<th align="right">varSup.3</th>
<th align="right">varSup.4</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="right">0.3220136</td>
<td align="right">0.7214277</td>
<td align="right">0.4100332</td>
<td align="right">0.6297775</td>
<td align="right">0.1379422</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="right">0.2597678</td>
<td align="right">0.7306484</td>
<td align="right">0.6712337</td>
<td align="right">0.5982710</td>
<td align="right">0.0771625</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="right">0.7429629</td>
<td align="right">0.6261439</td>
<td align="right">0.3021856</td>
<td align="right">0.5259329</td>
<td align="right">0.8652161</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="right">0.3575977</td>
<td align="right">0.5562253</td>
<td align="right">0.0814409</td>
<td align="right">0.1385676</td>
<td align="right">0.0905653</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="right">0.8224104</td>
<td align="right">0.4564368</td>
<td align="right">0.0205706</td>
<td align="right">0.7171542</td>
<td align="right">0.9549588</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="right">0.6508549</td>
<td align="right">0.8684848</td>
<td align="right">0.2119702</td>
<td align="right">0.2266126</td>
<td align="right">0.5774274</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<pre class="r"><code>keep &lt;- c(&#39;id&#39;,&#39;var1&#39;,&#39;var2&#39;)
spatData &lt;- spatData[, keep]
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<p><br/></p>
</div>
<div id="subsets" class="section level3">
<h3>Subsets</h3>
<p>You may also wish to subset your object based on certain attribute values. We will begin by adding some factorial attributes to our spatial object to discuss this in more detail.</p>
<pre class="r"><code>spatData$fact1 &lt;- paste0(&#39;a&#39;, 1:2) # Create factor with 2 levels
spatData$fact2 &lt;- paste0(&#39;b&#39;, 1:5) # Create factor with 5 levels
knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">fact1</th>
<th align="left">fact2</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="left">a1</td>
<td align="left">b1</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="left">a2</td>
<td align="left">b2</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="left">a1</td>
<td align="left">b3</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="left">a2</td>
<td align="left">b4</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="left">a1</td>
<td align="left">b5</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="left">a2</td>
<td align="left">b1</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<p><br/></p>
<p>The most simple way to subset an attributes table would be to manually select the rows that we wish to view. In this instance, letâ€™s say we only wish to use the first 10 rows of our data.</p>
<pre class="r"><code>selectID &lt;- 1:10
plot(spatData[, 1], col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData[selectID, 1], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/manualSub-1.png" width="672" /></p>
<pre class="r"><code>plot(spatData$geometry, col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData$geometry[selectID], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/manualSub-2.png" width="672" /></p>
<p><br/></p>
<p>However, subsets based on certain criteria, <em>e.g.</em> all values greater to or equal to 0, can be much more efficient to create subsets. These are conditional statements and there is a vast body of material available discussing them, so we will only present a few examples and invite you to consult other resources like <a href="https://stackoverflow.com/">StackOverflow</a> for more specific questions.</p>
<pre class="r"><code># Select all values for var1 greater to or equal to 0
selectID &lt;- spatData$var1 &gt;= 0
plot(spatData[, 1], col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData[selectID, 1], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/autoSub-1.png" width="672" /></p>
<pre class="r"><code># var1 smaller than 0 and var2 higher than 5
selectID &lt;- spatData$var1 &lt; 0 &amp; spatData$var2 &lt; 5
plot(spatData[, 1], col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData[selectID, 1], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/autoSub-2.png" width="672" /></p>
<pre class="r"><code># fact1 equal to a1
selectID &lt;- spatData$fact1 == &#39;a1&#39;
plot(spatData[, 1], col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData[selectID, 1], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/autoSub-3.png" width="672" /></p>
<pre class="r"><code># fact1 equal to a1 or var1 greater than 0
selectID &lt;- spatData$fact1 == &#39;a1&#39; | spatData$var1 &gt; 0
plot(spatData[, 1], col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData[selectID, 1], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/autoSub-4.png" width="672" /></p>
<pre class="r"><code># fact2 equal to b3 or b4
selectID &lt;- spatData$fact2 %in% c(&#39;b3&#39;,&#39;b4&#39;)
plot(spatData[, 1], col = &#39;#00000055&#39;, pch = 20, cex = 1.25, main = &#39;&#39;)
plot(spatData[selectID, 1], col = &#39;#000000&#39;, add = T, pch = 1, cex = 2, lwd = 2)</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/autoSub-5.png" width="672" /></p>
<p><br/></p>
</div>
<div id="join" class="section level3">
<h3>Join</h3>
<p>Joining tables based on their shared id is another common manipulation. This can be quickly accomplished using the <code>left_join</code> function from the <code>dplyr</code> package.</p>
<pre class="r"><code># Create data.frame with id field similar to that in the spatial object
joinData &lt;- data.frame(id = seq(1, 20, by = 2),
                       var3 = rnorm(10))

# Join with attributes table of spatial object
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>spatData &lt;- left_join(spatData, joinData)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre class="r"><code>knitr::kable(head(spatData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="right">var1</th>
<th align="right">var2</th>
<th align="left">fact1</th>
<th align="left">fact2</th>
<th align="right">var3</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.9611087</td>
<td align="right">3.585815</td>
<td align="left">a1</td>
<td align="left">b1</td>
<td align="right">0.8629550</td>
<td align="left">-81.92308, 43.62751</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">-0.5283123</td>
<td align="right">7.122170</td>
<td align="left">a2</td>
<td align="left">b2</td>
<td align="right">NA</td>
<td align="left">-81.13174, 42.94059</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.3123749</td>
<td align="right">3.785435</td>
<td align="left">a1</td>
<td align="left">b3</td>
<td align="right">0.1458425</td>
<td align="left">-80.9225, 42.0042</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">-0.3766192</td>
<td align="right">1.576984</td>
<td align="left">a2</td>
<td align="left">b4</td>
<td align="right">NA</td>
<td align="left">-81.98015, 42.46440</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.5209434</td>
<td align="right">2.882952</td>
<td align="left">a1</td>
<td align="left">b5</td>
<td align="right">1.2006158</td>
<td align="left">-81.83393, 43.28784</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">-1.3160303</td>
<td align="right">8.571470</td>
<td align="left">a2</td>
<td align="left">b1</td>
<td align="right">NA</td>
<td align="left">-81.82225, 42.41958</td>
</tr>
</tbody>
</table>
<p><br/></p>
</div>
<div id="aggregate" class="section level3">
<h3>Aggregate</h3>
<p>Information contained in a table can also be used to aggregate</p>
<pre class="r"><code>aggData &lt;- aggregate(spatData[&#39;var1&#39;], by = list(spatData$fact1), FUN = sum)
knitr::kable(head(aggData))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">Group.1</th>
<th align="right">var1</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">a1</td>
<td align="right">1.737499</td>
<td align="left">-81.93640, -81.92308, -81.83393, -81.51175, -81.49423, -81.47338, -80.92250, -80.41372, -80.24786, -80.20705, 43.66946, 43.62751, 43.28784, 42.16241, 42.87762, 43.77715, 42.00420, 43.03974, 43.72960, 43.14069</td>
</tr>
<tr class="even">
<td align="left">a2</td>
<td align="right">-1.229899</td>
<td align="left">-81.98015, -81.91928, -81.82225, -81.81566, -81.73420, -81.29270, -81.13174, -80.56011, -80.39814, -80.12993, 42.46440, 42.01263, 42.41958, 43.08618, 43.98255, 43.69821, 42.94059, 43.00948, 43.59598, 43.39345</td>
</tr>
</tbody>
</table>
<pre class="r"><code>plot(aggData, cex = abs(aggData$var1))</code></pre>
<pre><code>## Warning in classInt::classIntervals(values, nbreaks, breaks): n greater
## than number of different finite values\nn reset to number of different
## finite values</code></pre>
<pre><code>## Warning in classInt::classIntervals(values, nbreaks, breaks): n same
## as number of different finite values\neach different finite value is a
## separate class</code></pre>
<p><img src="/post/rinspace_attrmanip/index_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
</div>
<div id="raster-objects" class="section level2">
<h2>Raster objects</h2>
</div>
