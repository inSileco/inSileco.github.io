<!DOCTYPE html>
<html lang="en-us">
    <head>
        

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Gantt charts in R</title>
        
        <style>

    html body {
        font-family: , sans-serif;
        background-color: white;
    }

    :root {
        --accent: #3fb3b2;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=">





<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">



  <link rel="stylesheet" href="/css/academicons.min.css">

  <link rel="stylesheet" href="/css/font-awesome.min.css">

  <link rel="stylesheet" href="/css/syntax.css">

  <link rel="stylesheet" href="/css/insileco.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">

 






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.110.0">
        

        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-109508556-1"></script>
            <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments)};
              gtag('js', new Date());
              gtag('config', 'UA-109508556-1');
            </script>
        

        
            <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        

        

    </head>

    <body>
        

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand visible-xs" href="#">Gantt charts in R</a>
                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/about/">About</a></li>
                            
                                <li><a href="https://insilecoinc.github.io/">Consulting</a></li>
                            
                                <li><a href="/post/">Posts</a></li>
                            
                                <li><a href="/software/">Software</a></li>
                            
                                <li><a href="/wiki/">Wiki</a></li>
                            
                        </ul>
                    
                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="/"><i class="fa fa-home"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/inSileco/"><i class="fa fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/inSileco/"><i class="fa fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://insileco.github.io/index.xml"><i class="fa fa-rss"></i></a></li>
                            
                        </ul>
                    
                </div>
            </div>
        </nav>


<img class="full-width" width="100%" src="/img/banner4.png"></img>


<div>

    <div class="col-md-3">
        <h2><a href="#"><i class='fa fa-chevron-up'></i></a></h2>


    


<h2>
    <a href="#bottom">
        <i class='fa fa-chevron-down'></i>
    </a>
</h2>
    </div>


    <div class="col-md-8">

        <div class="post-content">

            <h1><a href="/2017/09/20/gantt-charts-in-r/">Gantt charts in R</a></h1>

            <h4><i class="fa fa-calendar" aria-hidden="true"></i> September 20, 2017</h4>

            <p>
                <i class="fa fa-tags" aria-hidden="true"></i> &nbsp;  <a
                    href="/tags/r"><kbd class="item-tag">R</kbd></a>  <a
                    href="/tags/time-management"><kbd class="item-tag">time management</kbd></a>  <a
                    href="/tags/gantt-chart"><kbd class="item-tag">gantt chart</kbd></a>  <a
                    href="/tags/data-visualization"><kbd class="item-tag">data visualization</kbd></a> 
                <br>
                
                <img src="/img/Rlogo.svg" title="List of R packages required for this post." width="80px"></img> &nbsp;  <a href="/rpkgs/graphics"><kbd class="item-tag2">graphics</kbd></a>  <a href="/rpkgs/tidyverse"><kbd class="item-tag2">tidyverse</kbd></a>  <a href="/rpkgs/rcolorbrewer"><kbd class="item-tag2">RColorBrewer</kbd></a>  <a href="/rpkgs/kableextra"><kbd class="item-tag2">kableExtra</kbd></a> 
                
            </p>

            
            <p style="font-size: 1.6em;"> <i class="fa fa-pencil" aria-hidden="true" title="Author(s)"></i>
                 
                <a href="/about/">David Beauchesne</a> &nbsp;
                
                <a href="#"></a>
            </p>
            

            
            <p> <i class="fa fa-check-square" aria-hidden="true" , title="Reviewer(s)"></i>
                 
                <a href="/about/">Kevin Cazelles</a> &nbsp;
                
                <a href="#"></a>
            </p>
            

            <p>
                
                
                
                <img
                    src='https://img.shields.io/static/v1?style=flat&amp;label=reading%20time&amp;message=15min&amp;color=3fb3b2&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA/1BMVEU/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7I/s7L////QnMRFAAAAVHRSTlMAAyRgm8Pa5C&#43;GyOPo5xV40unq3y2szJpqSjw3wcVtIwTikCLebwkBeQUQHTB30ZgHAojvroftrQjNS4nsBmfcKbbLbBMXdOvmsUgynn8LWMBxIGRFHj3/AAAAAWJLR0RU5AOIpQAAAAlwSFlzAAAN5QAADeUB5upprwAAAAd0SU1FB&#43;QEBQceG9g0RXAAAAFvSURBVDjLhVPXdoJAEF0BQdwZZMHeKIolMUbTJb2aXv//X4IFZD16uC8wu3fKztwhJERKEKW0rChyWhKFFFlHKqNmKQAGAKBZNbNG0XI6AzCAmiYNPsD0nBa/zxcCPyyWypVqtVIuFWdWIb&#43;6r9UZQqNp2QvTtpoNQFavRf7BveO24iFbrhMwljG0AsO21&#43;GL6nhtZIV5Hd0eouP1F&#43;c7u1p38df3HMTezBjoAG7ovzfcH4UxXAB9QMhYZdCwwsgHh0dRLqsBTB0TIQvYjFIfn5yeRUYTISsQkcJE2EwQJkBFIoFRsjcT7JIBEkkDlMlmAikDpImM1N9G8CnKREGzyhFiHauaqKwRzi8m/iVP4FNcmca1e9ONp&#43;CLHPm3aNzdP8SK5J9JyOPTcPr88jqKnsk3KsD47d2Ztj8uw0bxrZ7j8&#43;sbf6JW88Na4vdPi4bFjzsumeW4ecGssBJMouSSRZss&#43;&#43;TFSV695OUlW9f/HyniMFbfN&#43;2lAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA0LTA1VDExOjMwOjUyLTA0OjAwwJKD8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wNC0wNVQxMTozMDoyNy0wNDowMOkyHfEAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC'>
                
                
                 &nbsp;
                        
                        
                                <a href="https://creativecommons.org/licenses/by/4.0/">
                                    <img
                                        src="https://img.shields.io/static/v1?style=flat&label=license&message=CC-BY-4.0&color=f76f2b&logo=creative-commons">
                                </a>
                                 &nbsp;
                                
                                 &nbsp;
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <a href="http://twitter.com/share?url=https%3a%2f%2finsileco.github.io%2f2017%2f09%2f20%2fgantt-charts-in-r%2f&text=Gantt%20charts%20in%20R"
                                            target="_blank">
                                            <img
                                                src='https://img.shields.io/twitter/url?style=social&url=https%3a%2f%2finsileco.github.io%2f2017%2f09%2f20%2fgantt-charts-in-r%2f?link=http://left&link=http://right}'>
                                        </a>
            </p>


            <br>

            <div id="post-content-body" class="text-justify">

                
<script src="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/kePrint/kePrint.js"></script>
<link href="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/lightable/lightable.css" rel="stylesheet" />


<div id="gantt-charts" class="section level2">
<h2>Gantt charts</h2>
<p><a href="https://en.wikipedia.org/wiki/Gantt_chart">Gantt charts</a> are a very useful way
to organize projects into milestones and tasks visually. They are also dead
useful when comes the time to create a timeline for a project, whether it be for
a research project, field work or grant applications. I recently wanted to
create one, but was unsatisfied by what was available out there in terms of
visuals (although there are neat R examples, see <a href="https://www.r-bloggers.com/gantt-charts-in-r-using-plotly/">here</a>,
<a href="https://stackoverflow.com/questions/3550341/gantt-charts-with-r">here</a> and
<a href="https://davetang.org/muse/2017/02/03/gantt-chart-using-r/">here</a>). So I came up with my own!</p>
<p>For those who might be interested only in generating charts without all the code,
jump to the end, copy the <code>ganttR</code> function I created and Gantt away!</p>
</div>
<div id="initiate-r" class="section level2">
<h2>Initiate R</h2>
<pre class="r"><code># Packages required
library(knitr)
library(tidyverse)
library(RColorBrewer)
library(kableExtra)</code></pre>
</div>
<div id="the-code" class="section level2">
<h2>The code!</h2>
<p>I wanted to come up with something simple and visually appealing, so I created
a figure that simply required the following elements: milestone, tasks, start
date, due data and status.</p>
<div id="data" class="section level3">
<h3>Data</h3>
<pre class="r"><code># Let&#39;s organize a fake manuscript project to generate the chart.
Manuscript &lt;- c(&#39;Research &amp; readings&#39;, &#39;Data preparation&#39;, &#39;Analyses&#39;, &#39;Plan&#39;, &#39;Introduction&#39;,
  &#39;Methods&#39;, &#39;Results&#39;, &#39;Discussion&#39;, &#39;Conclusion&#39;, &#39;Preliminary version to co-authors&#39;)
startDate &lt;- c(&#39;2017-09-01&#39;, &#39;2017-09-14&#39;, &#39;2017-09-28&#39;, &#39;2017-09-21&#39;, &#39;2017-09-28&#39;,
  &#39;2017-09-14&#39;, &#39;2017-10-28&#39;, &#39;2017-11-14&#39;, &#39;2017-11-28&#39;, &#39;2017-12-11&#39;)
dueDate &lt;- c(&#39;2017-11-28&#39;, &#39;2017-09-28&#39;, &#39;2017-10-28&#39;, &#39;2017-09-28&#39;, &#39;2017-10-28&#39;,
  &#39;2017-10-28&#39;, &#39;2017-11-14&#39;, &#39;2017-11-28&#39;, &#39;2017-12-04&#39;, &#39;2017-12-11&#39;)
status &lt;- c(&#39;I&#39;, &#39;C&#39;, &#39;I&#39;, &#39;C&#39;, &#39;I&#39;, &#39;I&#39;, &#39;I&#39;, &#39;I&#39;, &#39;I&#39;, &#39;I&#39;)
nTasks &lt;- length(Manuscript)

# Create the data frame.
# In statuses, &quot;I&quot; and &quot;C&quot; would stand for &quot;Incomplete&quot; and &quot;Complete&quot;, respectively
df &lt;- data.frame(milestones = rep(&#39;Manuscript&#39;, nTasks),
                 tasks = Manuscript,
                 startDate = as.Date(startDate),
                 dueDate = as.Date(dueDate),
                 status = status,
                 stringsAsFactors = FALSE)

kable(df, &quot;html&quot;) %&gt;%
    kable_styling(full_width = FALSE)</code></pre>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
milestones
</th>
<th style="text-align:left;">
tasks
</th>
<th style="text-align:left;">
startDate
</th>
<th style="text-align:left;">
dueDate
</th>
<th style="text-align:left;">
status
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Research &amp; readings
</td>
<td style="text-align:left;">
2017-09-01
</td>
<td style="text-align:left;">
2017-11-28
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Data preparation
</td>
<td style="text-align:left;">
2017-09-14
</td>
<td style="text-align:left;">
2017-09-28
</td>
<td style="text-align:left;">
C
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Analyses
</td>
<td style="text-align:left;">
2017-09-28
</td>
<td style="text-align:left;">
2017-10-28
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Plan
</td>
<td style="text-align:left;">
2017-09-21
</td>
<td style="text-align:left;">
2017-09-28
</td>
<td style="text-align:left;">
C
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Introduction
</td>
<td style="text-align:left;">
2017-09-28
</td>
<td style="text-align:left;">
2017-10-28
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Methods
</td>
<td style="text-align:left;">
2017-09-14
</td>
<td style="text-align:left;">
2017-10-28
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Results
</td>
<td style="text-align:left;">
2017-10-28
</td>
<td style="text-align:left;">
2017-11-14
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Discussion
</td>
<td style="text-align:left;">
2017-11-14
</td>
<td style="text-align:left;">
2017-11-28
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Conclusion
</td>
<td style="text-align:left;">
2017-11-28
</td>
<td style="text-align:left;">
2017-12-04
</td>
<td style="text-align:left;">
I
</td>
</tr>
<tr>
<td style="text-align:left;">
Manuscript
</td>
<td style="text-align:left;">
Preliminary version to co-authors
</td>
<td style="text-align:left;">
2017-12-11
</td>
<td style="text-align:left;">
2017-12-11
</td>
<td style="text-align:left;">
I
</td>
</tr>
</tbody>
</table>
<p>We can now create our Gantt chart!</p>
</div>
<div id="the-chart" class="section level3">
<h3>The chart</h3>
<pre class="r"><code># Let&#39;s first organize our graph in order of tasks startDate
df &lt;- arrange(df, desc(startDate))

# We need a date range for which we wish to create the graph.
# Let&#39;s select the duration of the milestone
dateRange &lt;- c(min(df$startDate), max(df$dueDate))

# We also need the number of elements to add to our graph.
# It will be the number of tasks plus the number of milestones
nameMilestones &lt;- unique(df$milestones)
nMilestones &lt;- length(nameMilestones)
nLines &lt;- nTasks + nMilestones

# We also need a date sequence that will be used as one of our axes
# We select the date range divided into 7 days periods
dateSeq &lt;- seq.Date(dateRange[1], dateRange[2], by = 7)

# Finally, we need a color palette for the project
# We take three colors, the first will be for the milestones
# The second will be for incomplete tasks
# The third color will be for completed tasks
cols &lt;- c(&#39;#4f739d&#39;, &#39;#4f739dBB&#39;, &#39;#4f739d33&#39;)

# Gantt chart
par(family = &quot;serif&quot;, mar = c(6,9,2,0))
plot(x = 1, y = 1, col = &#39;transparent&#39;, xlim = dateRange, ylim = c(1, nLines), bty = &quot;n&quot;,
  ann = FALSE, xaxt = &quot;n&quot;, yaxt = &quot;n&quot;, type = &quot;n&quot;, bg = &#39;grey&#39;)

# Add axes, tasks and milestones
mtext(dateSeq, side = 1, at = dateSeq, las = 3, line = 1.5, cex = 0.75)
axis(1, dateSeq, labels = FALSE, line = 0.5)
mtext(df$tasks, side = 2, at = 1:nrow(df), las = 1, line = 0, cex = 0.75)
mtext(nameMilestones, side = 2, at = nrow(df)+1, las = 1, line = 8, font = 2, adj = 0, cex = 0.8)

# Add tasks
for(i in 1:nTasks) {
    lines(c(i,i) ~ c(df$startDate[i], df$dueDate[i]), lwd = 6, col = if(df$status[i] == &#39;C&#39;) cols[3] else cols[2])
}

# Add milestone
lines(c(nLines,nLines) ~ c(min(df$startDate), max(df$dueDate)), lwd = 8, col = cols[1])

# Add today&#39;s date
abline(v = as.Date(format(Sys.time(), format = &quot;%Y-%m-%d&quot;)), lwd = 2, lty = 2)</code></pre>
<p><img src="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/figure-html/singleGantt-1.svg" width="960" style="display: block; margin: auto;" /></p>
<p><br/></p>
</div>
<div id="multiple-milestones" class="section level3">
<h3>Multiple milestones</h3>
<p>Now Gantt charts are also useful to visualize and organize multiple projects
together, so let’s make this chart multi-milestony.</p>
<pre class="r"><code># We will simply duplicate the manuscript and do as though we are working on three consecutive manuscripts
df2 &lt;- df3 &lt;- df
df2$milestones &lt;- &#39;Manuscript2&#39;
df3$milestones &lt;- &#39;Manuscript3&#39;
df2[,c(&#39;startDate&#39;, &#39;dueDate&#39;)] &lt;- df2[,c(&#39;startDate&#39;, &#39;dueDate&#39;)] + as.numeric(diff(dateRange))
df3[,c(&#39;startDate&#39;, &#39;dueDate&#39;)] &lt;- df3[,c(&#39;startDate&#39;, &#39;dueDate&#39;)] + as.numeric(diff(dateRange))*2
df2$status &lt;- df3$status &lt;- rep(&#39;I&#39;, nTasks)
dfM &lt;- rbind(df, df2, df3)

# ... and go through the process of setting up the elements needed for the chart
# Let&#39;s start with the colors this time
# We take three colors, the first will be for the milestones
# The second will be for incomplete tasks
# The third color will be for completed tasks
nameMilestones &lt;- unique(dfM$milestones)
nMilestones &lt;- length(nameMilestones)
cols &lt;- data.frame(milestones = nameMilestones,
                   col = brewer.pal(nMilestones, &quot;Dark2&quot;),
                   stringsAsFactors = FALSE)

# Let&#39;s organize our dataset to produce the graph
dfMulti &lt;- dfM %&gt;%
      group_by(milestones) %&gt;% # group by milestones
      summarise(startDate = min(startDate),
                dueDate = max(dueDate)) %&gt;% # Determine the beginning and end date of milestones
      mutate(tasks = milestones, status = &#39;M&#39;) %&gt;% # Give a name and a status
      bind_rows(dfM) %&gt;% # Bind milestones with tasks
      mutate(lwd = ifelse(milestones == tasks, 8, 6)) %&gt;% # Add line width for graph
      left_join(cols, by = &#39;milestones&#39;) %&gt;% # add colors
      mutate(col = ifelse(status == &#39;I&#39;, paste0(col, &#39;BB&#39;), col)) %&gt;% # change colors according to status
      mutate(col = ifelse(status == &#39;C&#39;, paste0(col, &#39;33&#39;), col)) %&gt;% # change colors according to status
      mutate(cex = ifelse(status == &#39;M&#39;, 0.8, 0.75)) %&gt;%
      mutate(adj = ifelse(status == &#39;M&#39;, 0, 1)) %&gt;%
      mutate(line = ifelse(status == &#39;M&#39;, 8, 0.5)) %&gt;%
      mutate(font = ifelse(status == &#39;M&#39;, 2, 1)) %&gt;%
      arrange(milestones,desc(startDate),dueDate) # sort table

# We need a date range for which we wish to create the graph.
# Let&#39;s select the duration of the milestone
dateRange &lt;- c(min(dfMulti$startDate), max(dfMulti$dueDate))

# We also need a date sequence that will be used as one of our axes
# We select the date range divided into 7 days periods
dateSeq &lt;- seq.Date(dateRange[1], dateRange[2], by = 7)


# Gantt chart
nLines &lt;- nrow(dfMulti)
par(family = &quot;serif&quot;, mar = c(6, 9, 2, 0))
plot(x = 1, y = 1, col = &#39;transparent&#39;, xlim = dateRange, ylim = c(1, nLines),
  bty = &quot;n&quot;,ann = FALSE, xaxt = &quot;n&quot;, yaxt = &quot;n&quot;, type = &quot;n&quot;, bg = &#39;grey&#39;)
mtext(dateSeq, side = 1, at = dateSeq, las = 3, line = 1.5, cex = 0.75)
axis(1, dateSeq, labels = F, line = 0.5)

for(i in 1:nLines) {
    lines(c(i,i) ~ c(dfMulti$startDate[i],dfMulti$dueDate[i]),
          lwd = dfMulti$lwd[i],
          col = dfMulti$col[i])
    mtext(dfMulti$tasks[i],
          side = 2,
          at = i,
          las = 1,
          adj = dfMulti$adj[i],
          line = dfMulti$line[i],
          cex = dfMulti$cex[i],
          font = dfMulti$font[i])
}

abline(h = which(dfMulti$status == &#39;M&#39;) + 0.5, col = &#39;#634d42&#39;)
abline(v = as.Date(format(Sys.time(), format = &quot;%Y-%m-%d&quot;)), lwd = 2, lty = 2)</code></pre>
<p><img src="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/figure-html/multiGantt-1.svg" width="960" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="ganttr" class="section level2">
<h2>ganttR()</h2>
<p>Now that we have all the code, let’s simply transform it into a reusable function. Let’s also give it the choice to generate two types of graph: 1) all milestones and tasks or 2) only milestones.</p>
<pre class="r"><code>ganttR &lt;- function(df, type = &#39;all&#39;) {
    nameMilestones &lt;- unique(df$milestones)
    nMilestones &lt;- length(nameMilestones)
    rbPal &lt;- colorRampPalette(c(&quot;#3fb3b2&quot;, &quot;#ffdd55&quot;, &quot;#c7254e&quot;, &quot;#1b95e0&quot;, &quot;#8555b4&quot;)) # Color palette
    cols &lt;- data.frame(milestones = nameMilestones,
                       col = rbPal(nMilestones),
                       stringsAsFactors = FALSE)
    cols &lt;- cols[1:nMilestones, ]

    # Let&#39;s organize our dataset to produce the graph
    df &lt;- df %&gt;%
          group_by(milestones) %&gt;% # group by milestones
          summarise(startDate = min(startDate),
                    dueDate = max(dueDate)) %&gt;% # Determine the beginning and end date of milestones
          mutate(tasks = milestones, status = &#39;M&#39;) %&gt;% # Give a name and a status
          bind_rows(df) %&gt;% # Bind milestones with tasks
          mutate(lwd = ifelse(milestones == tasks, 8, 6)) %&gt;% # Add line width for graph
          left_join(cols, by = &#39;milestones&#39;) %&gt;% # add colors
          mutate(col = ifelse(status == &#39;I&#39;, paste0(col, &#39;BB&#39;), col)) %&gt;% # change colors according to status
          mutate(col = ifelse(status == &#39;C&#39;, paste0(col, &#39;33&#39;), col)) %&gt;% # change colors according to status
          mutate(cex = ifelse(status == &#39;M&#39;, 0.8, 0.75)) %&gt;%
          mutate(adj = ifelse(status == &#39;M&#39;, 0, 1)) %&gt;%
          mutate(line = ifelse(status == &#39;M&#39;, 8, 0.5)) %&gt;%
          mutate(font = ifelse(status == &#39;M&#39;, 2, 1)) %&gt;%
          arrange(milestones,desc(startDate),dueDate) # sort table

    # We need a date range for which we wish to crete the graph.
    # Let&#39;s select the duration of the milestone
    dateRange &lt;- c(min(df$startDate), max(df$dueDate))

    # We also need a date sequence that will be used as one of our axes
    # We select the date range divided into 7 days periods
    # dateSeq &lt;- seq.Date(dateRange[1], dateRange[2], by = 7)
    forced_start &lt;- as.Date(paste0(format(dateRange[1], &quot;%Y-%m&quot;), &quot;-01&quot;))
    yEnd &lt;- format(dateRange[2], &quot;%Y&quot;)
    mEnd &lt;- as.numeric(format(dateRange[2], &quot;%m&quot;)) + 1
    if (mEnd == 13) {
        yEnd &lt;- as.numeric(yEnd) + 1
        mEnd &lt;- 1
    }
    forced_end &lt;- as.Date(paste0(yEnd, &quot;-&quot;, mEnd,&quot;-01&quot;))
    dateSeq &lt;- seq.Date(forced_start, forced_end, by = &quot;month&quot;)
    lab &lt;- format(dateSeq, &quot;%B&quot;)

    # Gantt chart for &#39;all&#39; type
    if(type == &#39;all&#39;) {
        nLines &lt;- nrow(df)
        par(family = &quot;serif&quot;, mar = c(6,9,2,0))
        plot(x = 1, y = 1, col = &#39;transparent&#39;,
          xlim = c(min(dateSeq), max(dateSeq)),
          ylim = c(1, nLines), bty = &quot;n&quot;,
          ann = FALSE, xaxt = &quot;n&quot;, yaxt = &quot;n&quot;, type = &quot;n&quot;, bg = &#39;grey&#39;)
        mtext(lab[-length(lab)], side = 1, at = dateSeq[-length(lab)], las = 0,
          line = 1.5, cex = 0.75, adj = 0)
        axis(1, dateSeq, labels = FALSE, line = 0.5)
        extra &lt;- nLines * 0.03
        for(i in seq(1,length(dateSeq - 1), by = 2)) {
            polygon(x = c(dateSeq[i], dateSeq[i + 1], dateSeq[i + 1], dateSeq[i]),
                    y = c(1 - extra, 1 - extra, nLines + extra, nLines + extra),
                    border = &#39;transparent&#39;,
                    col = &#39;#f1f1f155&#39;)
        }

        for(i in 1:nLines) {
            lines(c(i,i) ~ c(df$startDate[i], df$dueDate[i]),
                  lwd = df$lwd[i],
                  col = df$col[i])
            mtext(df$tasks[i],
                  side = 2,
                  at = i,
                  las = 1,
                  adj = df$adj[i],
                  line = df$line[i],
                  cex = df$cex[i],
                  font = df$font[i])
        }

        abline(h = which(df$status == &#39;M&#39;) + 0.5, col = &#39;#634d42&#39;)
        abline(v = as.Date(format(Sys.time(), format = &quot;%Y-%m-%d&quot;)), lwd = 2, lty = 2)
    }

    # Gantt chart for &#39;milestones&#39; only
    if(type == &#39;milestones&#39;) {
        nLines &lt;- nMilestones
        ms &lt;- which(df$status == &#39;M&#39;)
        par(family = &quot;serif&quot;, mar = c(6,9,2,0))
        plot(x = 1, y = 1, col = &#39;transparent&#39;, xlim = c(min(dateSeq), max(dateSeq)), ylim = c(1,nLines), bty = &quot;n&quot;,ann = FALSE, xaxt = &quot;n&quot;, yaxt = &quot;n&quot;,type = &quot;n&quot;,bg = &#39;grey&#39;)
        mtext(lab[-length(lab)], side = 1, at = dateSeq[-length(lab)], las = 0, line = 1.5, cex = 0.75, adj = 0)
        axis(1, dateSeq, labels = FALSE, line = 0.5)
        extra &lt;- nLines * 0.03
        for(i in seq(1,length(dateSeq-1), by = 2)) {
            polygon(x = c(dateSeq[i], dateSeq[i + 1], dateSeq[i + 1], dateSeq[i]),
                    y = c(1 - extra, 1 - extra, nLines + extra, nLines + extra),
                    border = &#39;transparent&#39;,
                    col = &#39;#f1f1f155&#39;)
        }

        for(i in 1:nLines) {
            lines(c(i,i) ~ c(df$startDate[ms[i]], df$dueDate[ms[i]]),
                  lwd = df$lwd[ms[i]],
                  col = df$col[ms[i]])
            mtext(df$tasks[ms[i]],
                  side = 2,
                  at = i,
                  las = 1,
                  adj = 1,
                  line = 0.5,
                  cex = df$cex[ms[i]],
                  font = df$font[ms[i]])
        }
        abline(v = as.Date(format(Sys.time(), format = &quot;%Y-%m-%d&quot;)), lwd = 2, lty = 2)
    }
}

# Single milestone
ganttR(df)</code></pre>
<p><img src="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/figure-html/ganttR-1.svg" width="960" style="display: block; margin: auto;" /></p>
<pre class="r"><code>
# Multiple milestones
ganttR(dfM)</code></pre>
<p><img src="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/figure-html/ganttR-2.svg" width="960" style="display: block; margin: auto;" /></p>
<pre class="r"><code>
# Milestones only
ganttR(dfM, &#39;milestones&#39;)</code></pre>
<p><img src="https://insileco.github.io/2017/09/20/gantt-charts-in-r/index_files/figure-html/ganttR-3.svg" width="960" style="display: block; margin: auto;" /></p>
<div style="padding: 2rem 0rem 2rem 0rem;">
<details>
<summary>
Session info <i class="fa fa-cogs" aria-hidden="true"></i>
</summary>
<pre class="r"><code>sessionInfo()
#R&gt;  R version 4.2.2 (2022-10-31)
#R&gt;  Platform: x86_64-pc-linux-gnu (64-bit)
#R&gt;  Running under: Ubuntu 22.04.1 LTS
#R&gt;  
#R&gt;  Matrix products: default
#R&gt;  BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3
#R&gt;  LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so
#R&gt;  
#R&gt;  locale:
#R&gt;   [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       
#R&gt;   [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   
#R&gt;   [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          
#R&gt;  [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   
#R&gt;  
#R&gt;  attached base packages:
#R&gt;  [1] stats     graphics  grDevices utils     datasets  methods   base     
#R&gt;  
#R&gt;  other attached packages:
#R&gt;   [1] kableExtra_1.3.4       RColorBrewer_1.1-3     forcats_1.0.0         
#R&gt;   [4] stringr_1.5.0          dplyr_1.1.0            purrr_1.0.1           
#R&gt;   [7] readr_2.1.3            tidyr_1.3.0            tibble_3.1.8          
#R&gt;  [10] ggplot2_3.4.0          tidyverse_1.3.2        knitr_1.42            
#R&gt;  [13] inSilecoRef_0.0.1.9000
#R&gt;  
#R&gt;  loaded via a namespace (and not attached):
#R&gt;   [1] fs_1.6.0            lubridate_1.9.1     webshot_0.5.4      
#R&gt;   [4] httr_1.4.4          tools_4.2.2         backports_1.4.1    
#R&gt;   [7] bslib_0.4.2         utf8_1.2.3          R6_2.5.1           
#R&gt;  [10] DT_0.27             DBI_1.1.3           colorspace_2.1-0   
#R&gt;  [13] withr_2.5.0         tidyselect_1.2.0    curl_5.0.0         
#R&gt;  [16] compiler_4.2.2      cli_3.6.0           rvest_1.0.3        
#R&gt;  [19] xml2_1.3.3          bookdown_0.32       sass_0.4.5         
#R&gt;  [22] scales_1.2.1        systemfonts_1.0.4   digest_0.6.31      
#R&gt;  [25] svglite_2.1.1       rmarkdown_2.20      pkgconfig_2.0.3    
#R&gt;  [28] htmltools_0.5.4     bibtex_0.5.1        highr_0.10         
#R&gt;  [31] dbplyr_2.3.0        fastmap_1.1.0       htmlwidgets_1.6.1  
#R&gt;  [34] rlang_1.0.6         readxl_1.4.1        rstudioapi_0.14    
#R&gt;  [37] httpcode_0.3.0      shiny_1.7.4         jquerylib_0.1.4    
#R&gt;  [40] generics_0.1.3      jsonlite_1.8.4      googlesheets4_1.0.1
#R&gt;  [43] magrittr_2.0.3      Rcpp_1.0.10         munsell_0.5.0      
#R&gt;  [46] fansi_1.0.4         RefManageR_1.4.0    lifecycle_1.0.3    
#R&gt;  [49] stringi_1.7.12      yaml_2.3.7          plyr_1.8.8         
#R&gt;  [52] grid_4.2.2          promises_1.2.0.1    crayon_1.5.2       
#R&gt;  [55] miniUI_0.1.1.1      haven_2.5.1         hms_1.1.2          
#R&gt;  [58] pillar_1.8.1        crul_1.3            reprex_2.0.2       
#R&gt;  [61] glue_1.6.2          rcrossref_1.2.0     evaluate_0.20      
#R&gt;  [64] blogdown_1.16       modelr_0.1.10       vctrs_0.5.2        
#R&gt;  [67] tzdb_0.3.0          httpuv_1.6.8        cellranger_1.1.0   
#R&gt;  [70] gtable_0.3.1        assertthat_0.2.1    cachem_1.0.6       
#R&gt;  [73] xfun_0.37           mime_0.12           xtable_1.8-4       
#R&gt;  [76] broom_1.0.3         later_1.3.0         viridisLite_0.4.1  
#R&gt;  [79] googledrive_2.0.0   gargle_1.3.0        timechange_0.2.0   
#R&gt;  [82] ellipsis_0.3.2</code></pre>
</details>
</div>
</div>


                    
                    <div class="edits" style="margin-top: 2em; margin-bottom: 1em;">
                        <h4><b><i class="fa fa-edit" aria-hidden="true"></i> Edits</b></h4>
                        <p style="font-size: 1.5rem">
                            
                            <i class="fa fa-pencil" aria-hidden="true"></i> Apr 23, 2022 -- Improve code formatting. <br>
                            
                        </p>
                    </div>
                    


            </div>


            

            </center>

        </div>

          <br>


  
  <script src="//yihui.name/js/math-code.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
  
  


  <script src="/js/sidebar-post.js"></script>

  <h3 class="page-header">Comments on this post</h3>

  <script src="https://utteranc.es/client.js"
        repo="inSileco/inSileco.github.io"
        issue-term="pathname"
        label="Comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
  </script>


  <details>
  <summary>Comment with Disqus</summary>
  <div id="disqus_thread"></div>
  </details>

  
  

  
    <h3 class="page-header">Related posts</h3>
     <div class="item-bottom">

  

  <h1>
    <a href="/2020/08/29/custom-tick-marks-with-rs-base-graphics-system/">Custom tick marks with R&#39;s base graphics system</a> <small>August 29, 2020</small>
  </h1>

  <p> <i class="fa fa-tags" aria-hidden="true"></i>  <a href="/tags/r"><kbd class="item-tag">R</kbd></a>  <a href="/tags/ticks"><kbd class="item-tag">ticks</kbd></a>  <a href="/tags/axes"><kbd class="item-tag">axes</kbd></a> </p>

  



  

</div>
  <div class="item-bottom">

  

  <h1>
    <a href="/2020/04/21/insilecomisc-0.4.0-part-2/2/">inSilecoMisc 0.4.0 (part 2/2)</a> <small>April 21, 2020</small>
  </h1>

  <p> <i class="fa fa-tags" aria-hidden="true"></i>  <a href="/tags/r"><kbd class="item-tag">R</kbd></a>  <a href="/tags/package"><kbd class="item-tag">package</kbd></a>  <a href="/tags/development"><kbd class="item-tag">development</kbd></a>  <a href="/tags/insilecomisc"><kbd class="item-tag">inSilecoMisc</kbd></a> </p>

  



  

</div>
  <div class="item-bottom">

  

  <h1>
    <a href="/2020/04/14/insilecomisc-0.4.0-part-1/2/">inSilecoMisc 0.4.0 (part 1/2)</a> <small>April 14, 2020</small>
  </h1>

  <p> <i class="fa fa-tags" aria-hidden="true"></i>  <a href="/tags/r"><kbd class="item-tag">R</kbd></a>  <a href="/tags/package"><kbd class="item-tag">package</kbd></a>  <a href="/tags/development"><kbd class="item-tag">development</kbd></a>  <a href="/tags/insilecomisc"><kbd class="item-tag">inSilecoMisc</kbd></a> </p>

  



  

</div>
 
  





  <script>
    


    var disqus_config = function() {
      this.page.url = "https://insileco.github.io" + "https://insileco.github.io/2017/09/20/gantt-charts-in-r/"; 
      this.page.identifier = "Gantt charts in R"; 
    };

    (function() { 
      var d = document,
        s = d.createElement('script');
      s.src = 'https://insileco.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

  <noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
  </noscript>



</div>


    </div>

    <footer>

  <div class="col-md-3">

    <a href="#" id="bottom"></a>

  </div>

  <div class="col-md-8">

    <script src="//yihui.name/js/math-code.js"></script>
    <script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

    <hr>
    <p class="copyright text-muted" style="font-size: 1.6rem;">
      &copy; 2017-2023 inSileco |
      Powered by <a href="https://bookdown.org/yihui/blogdown/">Blogdown</a>,
      <a href="https://gohugo.io">Hugo</a>
      and <a href="https://github.com/calintat/minimal">Minimal</a> |
      Latest build: 05 February 2023 03:33 UTC.
    </p>

  </div>


</footer>

</body>

</html>